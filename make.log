rm -f bin/client1 bin/client2 bin/test_protocol bin/test_client1 bin/test_client2
gcc -Wall -g -I./src -I./tests -o bin/client1 src/client1.c src/protocol.c
gcc -Wall -g -I./src -I./tests -o bin/client2 src/client2.c src/protocol.c
gcc -Wall -g -I./src -I./tests -o bin/test_protocol tests/test_protocol.c src/protocol.c -lrt
gcc -Wall -g -I./src -I./tests -o bin/test_client1 tests/test_client1.c src/protocol.c -lrt
gcc -Wall -g -I./src -I./tests -o bin/test_client2 tests/test_client2.c src/protocol.c -lrt
./bin/test_protocol

Test test_protocol_read_tcp_last_line:
1721579522282 tests/test_protocol.c:39: try reveal bad socket at read: Assertion SUCCESS: expected -1, got -1
1721579522533 tests/test_protocol.c:48: out1 read: Assertion SUCCESS: expected 0, got 0
1721579522533 tests/test_protocol.c:54: out1 data range: Assertion SUCCESS: expected 0, got 0
1721579522533 tests/test_protocol.c:65: out1 empty --: Assertion SUCCESS: expected 0, got 0
1721579523173 1k read overhead: 140 ms
1721579523173 tests/test_protocol.c:78: 1k read overhead performance: Assertion SUCCESS: expected 0, got 0
PASSED


Test test_protocol_json_report:
1721579533274 tests/test_protocol.c:102: report print: Assertion SUCCESS: expected 0, got 0
Captured buffer:
{"timestamp": 1721579523374, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721579523474, "out1": "-0.5", "out2": "0.0", "out3": "0.0"}
{"timestamp": 1721579523574, "out1": "-1.4", "out2": "--", "out3": "--"}
{"timestamp": 1721579523674, "out1": "-3.4", "out2": "-1.0", "out3": "--"}
{"timestamp": 1721579523774, "out1": "-4.4", "out2": "--", "out3": "--"}
{"timestamp": 1721579523874, "out1": "-4.8", "out2": "-2.0", "out3": "--"}
{"timestamp": 1721579523974, "out1": "-5.0", "out2": "--", "out3": "0.0"}
{"timestamp": 1721579524074, "out1": "-4.5", "out2": "-3.0", "out3": "--"}
{"timestamp": 1721579524174, "out1": "-3.6", "out2": "--", "out3": "--"}
{"timestamp": 1721579524274, "out1": "-2.4", "out2": "-4.0", "out3": "--"}
{"timestamp": 1721579524374, "out1": "-1.2", "out2": "--", "out3": "--"}
{"timestamp": 1721579524474, "out1": "0.6", "out2": "-5.0", "out3": "0.0"}
{"timestamp": 1721579524574, "out1": "2.1", "out2": "--", "out3": "--"}
{"timestamp": 1721579524674, "out1": "3.3", "out2": "-4.0", "out3": "--"}
{"timestamp": 1721579524774, "out1": "4.4", "out2": "--", "out3": "--"}
{"timestamp": 1721579524874, "out1": "4.9", "out2": "-3.0", "out3": "--"}
{"timestamp": 1721579524974, "out1": "5.0", "out2": "--", "out3": "0.0"}
{"timestamp": 1721579525074, "out1": "4.6", "out2": "-2.0", "out3": "--"}
{"timestamp": 1721579525174, "out1": "3.8", "out2": "--", "out3": "--"}
{"timestamp": 1721579525274, "out1": "2.7", "out2": "-1.0", "out3": "--"}
{"timestamp": 1721579525374, "out1": "1.1", "out2": "--", "out3": "--"}
{"timestamp": 1721579525474, "out1": "-0.6", "out2": "-0.0", "out3": "0.0"}
{"timestamp": 1721579525574, "out1": "-2.1", "out2": "--", "out3": "--"}
{"timestamp": 1721579525674, "out1": "-3.1", "out2": "1.0", "out3": "--"}
{"timestamp": 1721579525774, "out1": "-3.8", "out2": "--", "out3": "--"}
{"timestamp": 1721579525874, "out1": "-4.6", "out2": "2.0", "out3": "--"}
{"timestamp": 1721579525974, "out1": "-5.0", "out2": "--", "out3": "0.0"}
{"timestamp": 1721579526074, "out1": "-4.5", "out2": "3.0", "out3": "--"}
{"timestamp": 1721579526174, "out1": "-4.1", "out2": "--", "out3": "--"}
{"timestamp": 1721579526274, "out1": "-2.5", "out2": "4.0", "out3": "--"}
{"timestamp": 1721579526374, "out1": "-0.9", "out2": "--", "out3": "--"}
{"timestamp": 1721579526474, "out1": "0.6", "out2": "5.0", "out3": "5.0"}
{"timestamp": 1721579526574, "out1": "5.8", "out2": "--", "out3": "--"}
{"timestamp": 1721579526674, "out1": "7.9", "out2": "4.0", "out3": "--"}
{"timestamp": 1721579526774, "out1": "6.8", "out2": "--", "out3": "--"}
{"timestamp": 1721579526874, "out1": "3.4", "out2": "3.0", "out3": "--"}
{"timestamp": 1721579526974, "out1": "-1.0", "out2": "--", "out3": "5.0"}
{"timestamp": 1721579527074, "out1": "-5.8", "out2": "2.0", "out3": "--"}
{"timestamp": 1721579527174, "out1": "-8.0", "out2": "--", "out3": "--"}
{"timestamp": 1721579527274, "out1": "-6.8", "out2": "1.0", "out3": "--"}
{"timestamp": 1721579527374, "out1": "-3.9", "out2": "--", "out3": "--"}
{"timestamp": 1721579527474, "out1": "0.5", "out2": "0.0", "out3": "5.0"}
{"timestamp": 1721579527574, "out1": "5.1", "out2": "--", "out3": "--"}
{"timestamp": 1721579527674, "out1": "7.9", "out2": "-1.0", "out3": "--"}
{"timestamp": 1721579527774, "out1": "7.0", "out2": "--", "out3": "--"}
{"timestamp": 1721579527874, "out1": "4.3", "out2": "-2.0", "out3": "--"}
{"timestamp": 1721579527974, "out1": "-0.5", "out2": "--", "out3": "5.0"}
{"timestamp": 1721579528074, "out1": "-4.7", "out2": "-3.0", "out3": "--"}
{"timestamp": 1721579528174, "out1": "-7.9", "out2": "--", "out3": "--"}
{"timestamp": 1721579528274, "out1": "-7.2", "out2": "-4.0", "out3": "--"}
{"timestamp": 1721579528374, "out1": "-2.9", "out2": "--", "out3": "--"}
{"timestamp": 1721579528474, "out1": "1.5", "out2": "-5.0", "out3": "5.0"}
{"timestamp": 1721579528574, "out1": "5.8", "out2": "--", "out3": "--"}
{"timestamp": 1721579528674, "out1": "7.2", "out2": "-4.0", "out3": "--"}
{"timestamp": 1721579528774, "out1": "6.8", "out2": "--", "out3": "--"}
{"timestamp": 1721579528874, "out1": "4.3", "out2": "-3.0", "out3": "--"}
{"timestamp": 1721579528974, "out1": "-2.0", "out2": "--", "out3": "5.0"}
{"timestamp": 1721579529074, "out1": "-6.2", "out2": "-2.0", "out3": "--"}
{"timestamp": 1721579529174, "out1": "-8.0", "out2": "--", "out3": "--"}
{"timestamp": 1721579529274, "out1": "-7.0", "out2": "-1.0", "out3": "--"}
{"timestamp": 1721579529374, "out1": "-2.9", "out2": "--", "out3": "--"}
{"timestamp": 1721579529474, "out1": "2.0", "out2": "-0.0", "out3": "5.0"}
{"timestamp": 1721579529574, "out1": "4.3", "out2": "--", "out3": "--"}
{"timestamp": 1721579529674, "out1": "7.9", "out2": "--", "out3": "--"}
{"timestamp": 1721579529774, "out1": "7.2", "out2": "--", "out3": "--"}
{"timestamp": 1721579529874, "out1": "3.4", "out2": "2.0", "out3": "--"}
{"timestamp": 1721579529974, "out1": "0.5", "out2": "--", "out3": "5.0"}
{"timestamp": 1721579530074, "out1": "-5.8", "out2": "3.0", "out3": "--"}
{"timestamp": 1721579530174, "out1": "-7.9", "out2": "--", "out3": "--"}
{"timestamp": 1721579530274, "out1": "-6.8", "out2": "4.0", "out3": "--"}
{"timestamp": 1721579530374, "out1": "-4.7", "out2": "--", "out3": "--"}
{"timestamp": 1721579530474, "out1": "1.5", "out2": "5.0", "out3": "5.0"}
{"timestamp": 1721579530574, "out1": "5.5", "out2": "--", "out3": "--"}
{"timestamp": 1721579530674, "out1": "7.9", "out2": "--", "out3": "--"}
{"timestamp": 1721579530774, "out1": "7.2", "out2": "--", "out3": "--"}
{"timestamp": 1721579530874, "out1": "4.3", "out2": "3.0", "out3": "--"}
{"timestamp": 1721579530974, "out1": "-2.0", "out2": "--", "out3": "5.0"}
{"timestamp": 1721579531074, "out1": "-5.8", "out2": "2.0", "out3": "--"}
{"timestamp": 1721579531174, "out1": "-7.7", "out2": "--", "out3": "--"}
{"timestamp": 1721579531274, "out1": "-7.4", "out2": "1.0", "out3": "--"}
{"timestamp": 1721579531374, "out1": "-2.9", "out2": "--", "out3": "--"}
{"timestamp": 1721579531474, "out1": "2.0", "out2": "0.0", "out3": "0.0"}
{"timestamp": 1721579531574, "out1": "4.0", "out2": "--", "out3": "--"}
{"timestamp": 1721579531674, "out1": "0.5", "out2": "-1.0", "out3": "--"}
{"timestamp": 1721579531774, "out1": "-2.7", "out2": "--", "out3": "--"}
{"timestamp": 1721579531874, "out1": "-2.7", "out2": "-2.0", "out3": "--"}
{"timestamp": 1721579531974, "out1": "1.9", "out2": "--", "out3": "0.0"}
{"timestamp": 1721579532074, "out1": "4.0", "out2": "--", "out3": "--"}
{"timestamp": 1721579532174, "out1": "1.5", "out2": "--", "out3": "--"}
{"timestamp": 1721579532274, "out1": "-3.6", "out2": "--", "out3": "--"}
{"timestamp": 1721579532374, "out1": "-3.9", "out2": "--", "out3": "--"}
{"timestamp": 1721579532474, "out1": "0.0", "out2": "-5.0", "out3": "0.0"}
{"timestamp": 1721579532574, "out1": "3.9", "out2": "--", "out3": "--"}
{"timestamp": 1721579532674, "out1": "0.5", "out2": "--", "out3": "--"}
{"timestamp": 1721579532774, "out1": "-3.6", "out2": "--", "out3": "--"}
{"timestamp": 1721579532874, "out1": "-2.7", "out2": "-3.0", "out3": "--"}
{"timestamp": 1721579532974, "out1": "1.9", "out2": "--", "out3": "0.0"}
{"timestamp": 1721579533074, "out1": "3.9", "out2": "-2.0", "out3": "--"}
{"timestamp": 1721579533174, "out1": "0.5", "out2": "--", "out3": "--"}

1721579533274 report timing met: 1 out1 control effect f1a8 met: 1 out1 control effect f2a4 met: 1
1721579533274 tests/test_protocol.c:105: report timing with out1 control effects: Assertion SUCCESS: expected 0, got 0
PASSED

./bin/test_client1

Test test_client1:
{"timestamp": 1721579533476, "out1": "0.5", "out2": "-0.0", "out3": "0.0"}
{"timestamp": 1721579533576, "out1": "3.9", "out2": "--", "out3": "--"}
{"timestamp": 1721579533676, "out1": "1.0", "out2": "1.0", "out3": "--"}
{"timestamp": 1721579533776, "out1": "-3.1", "out2": "--", "out3": "--"}
{"timestamp": 1721579533876, "out1": "-3.4", "out2": "2.0", "out3": "--"}
{"timestamp": 1721579533976, "out1": "-1.5", "out2": "--", "out3": "0.0"}
{"timestamp": 1721579534076, "out1": "3.1", "out2": "3.0", "out3": "--"}
{"timestamp": 1721579534176, "out1": "0.5", "out2": "--", "out3": "--"}

Test test_client1:
1721579534275 tests/test_client1.c:35: check SIGINT: Assertion SUCCESS: expected 0, got 0
PASSED

./bin/test_client2

Test test_client2:
{"timestamp": 1721579534317, "out1": "-4.0", "out2": "--", "out3": "--"}
{"timestamp": 1721579534337, "out1": "-3.9", "out2": "--", "out3": "--"}
{"timestamp": 1721579534357, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721579534377, "out1": "-3.1", "out2": "--", "out3": "--"}
{"timestamp": 1721579534397, "out1": "-1.9", "out2": "--", "out3": "--"}
{"timestamp": 1721579534417, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721579534437, "out1": "0.0", "out2": "5.0", "out3": "5.0"}
{"timestamp": 1721579534457, "out1": "1.0", "out2": "--", "out3": "--"}
{"timestamp": 1721579534477, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721579534497, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721579534517, "out1": "3.9", "out2": "--", "out3": "--"}
{"timestamp": 1721579534537, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721579534557, "out1": "5.1", "out2": "--", "out3": "--"}
{"timestamp": 1721579534577, "out1": "5.8", "out2": "--", "out3": "--"}
{"timestamp": 1721579534597, "out1": "6.5", "out2": "--", "out3": "--"}
{"timestamp": 1721579534617, "out1": "7.2", "out2": "--", "out3": "--"}
{"timestamp": 1721579534637, "out1": "7.4", "out2": "4.0", "out3": "--"}
{"timestamp": 1721579534657, "out1": "7.7", "out2": "--", "out3": "--"}
{"timestamp": 1721579534677, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721579534697, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721579534717, "out1": "7.9", "out2": "--", "out3": "--"}
{"timestamp": 1721579534737, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721579534757, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721579534777, "out1": "7.0", "out2": "--", "out3": "--"}
{"timestamp": 1721579534797, "out1": "6.2", "out2": "--", "out3": "--"}
{"timestamp": 1721579534817, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721579534837, "out1": "4.7", "out2": "3.0", "out3": "--"}
{"timestamp": 1721579534857, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721579534877, "out1": "2.9", "out2": "--", "out3": "--"}
{"timestamp": 1721579534897, "out1": "2.0", "out2": "--", "out3": "--"}
{"timestamp": 1721579534917, "out1": "1.0", "out2": "--", "out3": "--"}
{"timestamp": 1721579534937, "out1": "0.5", "out2": "--", "out3": "5.0"}
{"timestamp": 1721579534957, "out1": "-1.0", "out2": "--", "out3": "--"}
{"timestamp": 1721579534977, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721579534997, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721579535017, "out1": "-3.9", "out2": "--", "out3": "--"}
{"timestamp": 1721579535037, "out1": "-4.7", "out2": "2.0", "out3": "--"}
{"timestamp": 1721579535057, "out1": "-5.5", "out2": "--", "out3": "--"}
{"timestamp": 1721579535077, "out1": "-5.8", "out2": "--", "out3": "--"}
{"timestamp": 1721579535097, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721579535117, "out1": "-7.2", "out2": "--", "out3": "--"}
{"timestamp": 1721579535137, "out1": "-7.4", "out2": "--", "out3": "--"}
{"timestamp": 1721579535157, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721579535177, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721579535197, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721579535217, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721579535237, "out1": "-7.7", "out2": "1.0", "out3": "--"}
{"timestamp": 1721579535257, "out1": "-7.4", "out2": "--", "out3": "--"}

Test test_client2:
1721579535277 tests/test_client2.c:35: check SIGINT: Assertion SUCCESS: expected 0, got 0
PASSED

