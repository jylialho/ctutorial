rm -f bin/client1 bin/client2 bin/test_protocol bin/test_client1 bin/test_client2
gcc -Wall -g -I./src -I./tests -o bin/client1 src/client1.c src/protocol.c
gcc -Wall -g -I./src -I./tests -o bin/client2 src/client2.c src/protocol.c
gcc -Wall -g -I./src -I./tests -o bin/test_protocol tests/test_protocol.c src/protocol.c -lrt
gcc -Wall -g -I./src -I./tests -o bin/test_client1 tests/test_client1.c src/protocol.c -lrt
gcc -Wall -g -I./src -I./tests -o bin/test_client2 tests/test_client2.c src/protocol.c -lrt
./bin/test_protocol

Test test_protocol_read_tcp_last_line:
1721587351943 tests/test_protocol.c:39: try reveal bad socket at read: Assertion SUCCESS: expected -1, got -1
1721587352193 tests/test_protocol.c:48: out1 read: Assertion SUCCESS: expected 0, got 0
1721587352193 tests/test_protocol.c:54: out1 data range: Assertion SUCCESS: expected 0, got 0
1721587352193 tests/test_protocol.c:65: out1 empty --: Assertion SUCCESS: expected 0, got 0
1721587352800 1k read overhead: 107 ms
1721587352800 tests/test_protocol.c:78: 1k read overhead performance: Assertion SUCCESS: expected 0, got 0
PASSED


Test test_protocol_print_report:
1721587362900 tests/test_protocol.c:102: report print: Assertion SUCCESS: expected 0, got 0
Captured buffer:
{"timestamp": 1721587353000, "out1": "1.5", "out2": "4.0", "out3": "--"}
{"timestamp": 1721587353101, "out1": "-3.1", "out2": "--", "out3": "--"}
{"timestamp": 1721587353200, "out1": "-3.8", "out2": "3.0", "out3": "--"}
{"timestamp": 1721587353300, "out1": "0.5", "out2": "--", "out3": "5.0"}
{"timestamp": 1721587353401, "out1": "-3.4", "out2": "2.0", "out3": "--"}
{"timestamp": 1721587353500, "out1": "-6.5", "out2": "--", "out3": "--"}
{"timestamp": 1721587353600, "out1": "-7.2", "out2": "1.0", "out3": "--"}
{"timestamp": 1721587353701, "out1": "-5.1", "out2": "--", "out3": "--"}
{"timestamp": 1721587353801, "out1": "-0.5", "out2": "0.0", "out3": "0.0"}
{"timestamp": 1721587353901, "out1": "3.9", "out2": "--", "out3": "--"}
{"timestamp": 1721587354001, "out1": "2.4", "out2": "-1.0", "out3": "--"}
{"timestamp": 1721587354101, "out1": "-2.7", "out2": "--", "out3": "--"}
{"timestamp": 1721587354200, "out1": "-3.9", "out2": "-2.0", "out3": "--"}
{"timestamp": 1721587354301, "out1": "1.0", "out2": "--", "out3": "0.0"}
{"timestamp": 1721587354401, "out1": "3.8", "out2": "-3.0", "out3": "--"}
{"timestamp": 1721587354500, "out1": "1.5", "out2": "--", "out3": "--"}
{"timestamp": 1721587354601, "out1": "-2.4", "out2": "-4.0", "out3": "--"}
{"timestamp": 1721587354701, "out1": "-3.4", "out2": "--", "out3": "--"}
{"timestamp": 1721587354801, "out1": "-2.4", "out2": "-5.0", "out3": "0.0"}
{"timestamp": 1721587354900, "out1": "3.6", "out2": "--", "out3": "--"}
{"timestamp": 1721587355000, "out1": "2.4", "out2": "-4.0", "out3": "--"}
{"timestamp": 1721587355101, "out1": "-3.1", "out2": "--", "out3": "--"}
{"timestamp": 1721587355201, "out1": "-3.4", "out2": "-3.0", "out3": "--"}
{"timestamp": 1721587355301, "out1": "0.5", "out2": "--", "out3": "0.0"}
{"timestamp": 1721587355401, "out1": "4.0", "out2": "-2.0", "out3": "--"}
{"timestamp": 1721587355501, "out1": "1.5", "out2": "--", "out3": "--"}
{"timestamp": 1721587355601, "out1": "-2.4", "out2": "-1.0", "out3": "--"}
{"timestamp": 1721587355701, "out1": "-3.9", "out2": "--", "out3": "--"}
{"timestamp": 1721587355801, "out1": "1.0", "out2": "-0.0", "out3": "5.0"}
{"timestamp": 1721587355901, "out1": "5.5", "out2": "--", "out3": "--"}
{"timestamp": 1721587356001, "out1": "7.7", "out2": "1.0", "out3": "--"}
{"timestamp": 1721587356101, "out1": "7.6", "out2": "--", "out3": "--"}
{"timestamp": 1721587356200, "out1": "5.1", "out2": "2.0", "out3": "--"}
{"timestamp": 1721587356301, "out1": "0.0", "out2": "--", "out3": "5.0"}
{"timestamp": 1721587356401, "out1": "-5.5", "out2": "3.0", "out3": "--"}
{"timestamp": 1721587356501, "out1": "-7.9", "out2": "--", "out3": "--"}
{"timestamp": 1721587356601, "out1": "-7.4", "out2": "4.0", "out3": "--"}
{"timestamp": 1721587356701, "out1": "-5.5", "out2": "--", "out3": "--"}
{"timestamp": 1721587356801, "out1": "0.5", "out2": "5.0", "out3": "5.0"}
{"timestamp": 1721587356901, "out1": "5.1", "out2": "--", "out3": "--"}
{"timestamp": 1721587357001, "out1": "7.6", "out2": "4.0", "out3": "--"}
{"timestamp": 1721587357101, "out1": "7.7", "out2": "--", "out3": "--"}
{"timestamp": 1721587357201, "out1": "4.7", "out2": "3.0", "out3": "--"}
{"timestamp": 1721587357301, "out1": "-1.0", "out2": "--", "out3": "5.0"}
{"timestamp": 1721587357401, "out1": "-4.7", "out2": "2.0", "out3": "--"}
{"timestamp": 1721587357501, "out1": "-7.7", "out2": "--", "out3": "--"}
{"timestamp": 1721587357601, "out1": "-7.2", "out2": "1.0", "out3": "--"}
{"timestamp": 1721587357701, "out1": "-3.9", "out2": "--", "out3": "--"}
{"timestamp": 1721587357801, "out1": "-0.0", "out2": "0.0", "out3": "5.0"}
{"timestamp": 1721587357901, "out1": "5.1", "out2": "--", "out3": "--"}
{"timestamp": 1721587358001, "out1": "7.4", "out2": "-1.0", "out3": "--"}
{"timestamp": 1721587358101, "out1": "7.2", "out2": "--", "out3": "--"}
{"timestamp": 1721587358201, "out1": "4.3", "out2": "--", "out3": "--"}
{"timestamp": 1721587358301, "out1": "-0.5", "out2": "--", "out3": "5.0"}
{"timestamp": 1721587358400, "out1": "-5.1", "out2": "--", "out3": "--"}
{"timestamp": 1721587358501, "out1": "-7.6", "out2": "--", "out3": "--"}
{"timestamp": 1721587358601, "out1": "-7.2", "out2": "-4.0", "out3": "--"}
{"timestamp": 1721587358701, "out1": "-3.9", "out2": "--", "out3": "--"}
{"timestamp": 1721587358801, "out1": "-0.5", "out2": "-5.0", "out3": "0.0"}
{"timestamp": 1721587358901, "out1": "3.6", "out2": "--", "out3": "--"}
{"timestamp": 1721587359001, "out1": "2.4", "out2": "-4.0", "out3": "--"}
{"timestamp": 1721587359101, "out1": "-2.4", "out2": "--", "out3": "--"}
{"timestamp": 1721587359201, "out1": "-3.6", "out2": "-3.0", "out3": "--"}
{"timestamp": 1721587359301, "out1": "0.5", "out2": "--", "out3": "0.0"}
{"timestamp": 1721587359401, "out1": "2.4", "out2": "-2.0", "out3": "--"}
{"timestamp": 1721587359501, "out1": "2.4", "out2": "--", "out3": "--"}
{"timestamp": 1721587359601, "out1": "-3.1", "out2": "-1.0", "out3": "--"}
{"timestamp": 1721587359700, "out1": "-3.4", "out2": "--", "out3": "--"}
{"timestamp": 1721587359800, "out1": "1.0", "out2": "-0.0", "out3": "0.0"}
{"timestamp": 1721587359901, "out1": "3.9", "out2": "--", "out3": "--"}
{"timestamp": 1721587360001, "out1": "1.5", "out2": "1.0", "out3": "--"}
{"timestamp": 1721587360101, "out1": "-1.5", "out2": "--", "out3": "--"}
{"timestamp": 1721587360200, "out1": "-3.6", "out2": "2.0", "out3": "--"}
{"timestamp": 1721587360301, "out1": "0.5", "out2": "--", "out3": "0.0"}
{"timestamp": 1721587360401, "out1": "3.9", "out2": "3.0", "out3": "--"}
{"timestamp": 1721587360501, "out1": "2.7", "out2": "--", "out3": "--"}
{"timestamp": 1721587360601, "out1": "-3.1", "out2": "4.0", "out3": "--"}
{"timestamp": 1721587360701, "out1": "-4.0", "out2": "--", "out3": "--"}
{"timestamp": 1721587360801, "out1": "-0.0", "out2": "5.0", "out3": "0.0"}
{"timestamp": 1721587360901, "out1": "3.9", "out2": "--", "out3": "--"}
{"timestamp": 1721587361001, "out1": "1.5", "out2": "4.0", "out3": "--"}
{"timestamp": 1721587361101, "out1": "-2.4", "out2": "--", "out3": "--"}
{"timestamp": 1721587361201, "out1": "-3.4", "out2": "3.0", "out3": "--"}
{"timestamp": 1721587361300, "out1": "-0.0", "out2": "--", "out3": "0.0"}
{"timestamp": 1721587361401, "out1": "3.8", "out2": "2.0", "out3": "--"}
{"timestamp": 1721587361501, "out1": "2.4", "out2": "--", "out3": "--"}
{"timestamp": 1721587361600, "out1": "-2.7", "out2": "1.0", "out3": "--"}
{"timestamp": 1721587361701, "out1": "-3.4", "out2": "--", "out3": "--"}
{"timestamp": 1721587361801, "out1": "-1.9", "out2": "0.0", "out3": "0.0"}
{"timestamp": 1721587361901, "out1": "3.6", "out2": "--", "out3": "--"}
{"timestamp": 1721587362001, "out1": "2.7", "out2": "-1.0", "out3": "--"}
{"timestamp": 1721587362101, "out1": "-3.1", "out2": "--", "out3": "--"}
{"timestamp": 1721587362201, "out1": "-3.6", "out2": "-2.0", "out3": "--"}
{"timestamp": 1721587362301, "out1": "1.0", "out2": "--", "out3": "0.0"}
{"timestamp": 1721587362401, "out1": "3.8", "out2": "-3.0", "out3": "--"}
{"timestamp": 1721587362501, "out1": "1.9", "out2": "--", "out3": "--"}
{"timestamp": 1721587362601, "out1": "-1.5", "out2": "-4.0", "out3": "--"}
{"timestamp": 1721587362700, "out1": "-3.8", "out2": "--", "out3": "--"}
{"timestamp": 1721587362801, "out1": "-0.0", "out2": "-5.0", "out3": "5.0"}

1721587362901 report timing met: 1 out1 control effect f1a8 met: 1 out1 control effect f2a4 met: 1
1721587362900 tests/test_protocol.c:105: report timing with out1 control effects: Assertion SUCCESS: expected 0, got 0
PASSED

./bin/test_client1

Test test_client1:
{"timestamp": 1721587363102, "out1": "7.2", "out2": "--", "out3": "--"}
{"timestamp": 1721587363202, "out1": "4.3", "out2": "-3.0", "out3": "--"}
{"timestamp": 1721587363302, "out1": "0.0", "out2": "--", "out3": "5.0"}
{"timestamp": 1721587363402, "out1": "-5.5", "out2": "-2.0", "out3": "--"}
{"timestamp": 1721587363502, "out1": "-7.7", "out2": "--", "out3": "--"}
{"timestamp": 1721587363602, "out1": "-7.7", "out2": "-1.0", "out3": "--"}
{"timestamp": 1721587363702, "out1": "-4.7", "out2": "--", "out3": "--"}
{"timestamp": 1721587363802, "out1": "1.0", "out2": "-0.0", "out3": "5.0"}

Test test_client1:
1721587363902 tests/test_client1.c:35: check SIGINT: Assertion SUCCESS: expected 0, got 0
PASSED

./bin/test_client2

Test test_client2:
{"timestamp": 1721587363943, "out1": "7.0", "out2": "--", "out3": "--"}
{"timestamp": 1721587363964, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721587363983, "out1": "7.6", "out2": "--", "out3": "--"}
{"timestamp": 1721587364003, "out1": "7.9", "out2": "--", "out3": "--"}
{"timestamp": 1721587364023, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721587364043, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721587364064, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721587364084, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721587364103, "out1": "7.2", "out2": "--", "out3": "--"}
{"timestamp": 1721587364124, "out1": "7.0", "out2": "2.0", "out3": "--"}
{"timestamp": 1721587364144, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721587364164, "out1": "5.5", "out2": "--", "out3": "--"}
{"timestamp": 1721587364183, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721587364203, "out1": "3.9", "out2": "--", "out3": "--"}
{"timestamp": 1721587364224, "out1": "2.9", "out2": "--", "out3": "5.0"}
{"timestamp": 1721587364243, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721587364263, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721587364284, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721587364303, "out1": "-1.5", "out2": "--", "out3": "--"}
{"timestamp": 1721587364324, "out1": "--", "out2": "3.0", "out3": "--"}
{"timestamp": 1721587364343, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721587364364, "out1": "-4.3", "out2": "--", "out3": "--"}
{"timestamp": 1721587364384, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721587364403, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721587364423, "out1": "-6.2", "out2": "--", "out3": "--"}
{"timestamp": 1721587364443, "out1": "-6.8", "out2": "--", "out3": "--"}
{"timestamp": 1721587364464, "out1": "-7.2", "out2": "--", "out3": "--"}
{"timestamp": 1721587364484, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721587364503, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721587364523, "out1": "--", "out2": "4.0", "out3": "--"}
{"timestamp": 1721587364543, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721587364564, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721587364583, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721587364603, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721587364623, "out1": "-6.8", "out2": "--", "out3": "--"}
{"timestamp": 1721587364644, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721587364663, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721587364683, "out1": "-4.3", "out2": "--", "out3": "--"}
{"timestamp": 1721587364703, "out1": "-3.9", "out2": "--", "out3": "--"}
{"timestamp": 1721587364723, "out1": "--", "out2": "5.0", "out3": "5.0"}
{"timestamp": 1721587364744, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721587364763, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721587364784, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721587364804, "out1": "1.0", "out2": "--", "out3": "--"}
{"timestamp": 1721587364824, "out1": "--", "out2": "--", "out3": "--"}
{"timestamp": 1721587364843, "out1": "3.4", "out2": "--", "out3": "--"}
{"timestamp": 1721587364863, "out1": "4.3", "out2": "--", "out3": "--"}
{"timestamp": 1721587364883, "out1": "4.7", "out2": "--", "out3": "--"}

Test test_client2:
1721587364903 tests/test_client2.c:35: check SIGINT: Assertion SUCCESS: expected 0, got 0
PASSED

